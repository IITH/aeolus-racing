---
import Layout from '../layouts/Layout.astro';
import Title from '../components/ui/Title.astro';
import Gallery from '../components/sections/Gallery.astro';
import Timeline from '../components/sections/Timeline.astro';

import { aboutData } from '../config/about';
---
<Layout>

<section class="about-section" data-animate-about>
  <div class="about-content">
    <div class="about-hero" data-animate-hero style="--delay: 0">
      <div class="hero-text">
        <Title text="ABOUT US" class="about-title" />
        <h1 class="hero-title">
            Built to Race. Driven to Innovate.
        </h1>
        <p class="hero-description">

          Aeolus Racing is the Formula Student team of IIT Hyderabad, built on the legacy of IITH Motorsports.
        </p>
        <p class="hero-description">
          We are a passionate, student-driven team that designs, builds, and races high-performance formula-style race cars — combining innovation, collaboration, and engineering precision across disciplines.
        </p>


      </div>

      <div class="hero-video" data-animate-video style="--delay: 1">
        <iframe
          class="video-embed"
          src={aboutData.heroVideo}
          title="Aeolus Racing Showcase"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
          loading="lazy">
        </iframe>
      </div>
    </div>

    <!-- Stats Section -->
    <div class="stats-section" data-animate-stats style="--delay: 2">
      <div class="stats-grid">
        {aboutData.stats.map((stat, index) => (
          <div class="stat-item" data-animate-stat style={`--delay: ${2 + index * 0.2}`}>
            <span class="stat-number">{stat.number}</span>
            <span class="stat-label">{stat.label}</span>
          </div>
        ))}
      </div>
    </div>

    <!-- Legacy Story Section -->
    <div class="story-section" data-animate-story style="--delay: 3">
      <div class="story-content">
        <div class="story-text">
          <h2 class="story-title">Our Legacy</h2>
          <p class="story-paragraph">
            Since 2013, IIT Hyderabad has been home to passionate automotive engineers
            who dared to dream beyond textbooks. What started as IITH Motorsports has
            evolved into Aeolus Racing, carrying forward a decade of innovation and
            competitive spirit.
          </p>
          <p class="story-paragraph">
            Through years of competing in national championships, facing challenges,
            and celebrating victories, we've built more than just racing cars –
            we've built a culture of excellence that defines who we are today.
          </p>
          <p class="story-paragraph highlight">
            <strong>"Engineering is not just about solving problems; it's about creating possibilities."</strong>
          </p>
        </div>
        <Timeline items={aboutData.timelineData} className="story-timeline" />
      </div>
    </div>

    <!-- Team Spirit Section -->
    <div class="spirit-section" data-animate-spirit style="--delay: 4">
      <div class="spirit-content">
        <h2 class="spirit-title">The Racing Spirit</h2>
        <p class="spirit-text">
          Every bolt tightened, every line of code written, and every late night
          spent in the workshop is driven by our shared passion for racing excellence.
          We don't just build cars; we craft dreams into reality.
        </p>
        <div class="spirit-quote">
          <p>
            "The pursuit of that perfect lap time, the satisfaction of seeing months
            of calculations come to life on the track, and the adrenaline rush of
            competition – this is what drives every member of our team to push beyond
            their limits."
          </p>
        </div>
      </div>
    </div>

    <!-- Gallery Section -->
    <Gallery
          title="Our Journey Through Time"
          images={aboutData.gallery}
          className="about-gallery"
        />
  </div>
</section>
</Layout>

<style>
  .about-section {
      font-family: Murecho;
    background: #000;
    color: white;
    padding: 4rem 2rem;
    width: 100vw;
    min-height: 100vh;
    opacity: 0;
    transition: opacity 0.8s ease;
    overflow-x: hidden;
  }

  .about-section.animate-in {
    opacity: 1;
  }

  .about-content {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
  }

  /* Main Hero Section */
  .about-hero {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: center;
    height: 100vh;
    margin-bottom: 6rem;
    transform: translateY(50px);
    opacity: 0;
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    transition-delay: calc(var(--delay) * 0.3s);
  }

  .about-hero.animate-in {
    transform: translateY(0);
    opacity: 1;
  }

  .hero-text {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .hero-title {
    font-size: 2.2rem;
    font-weight: 300;
    line-height: 1.3;
    margin: 0;
    color: white;
  }

  .hero-description {
    font-family: Murecho;
    font-size: 1.2rem;
    line-height: 1.6;
    margin: 0;
  }

  .legacy-badge {
    display: inline-block;
    transform: scale(0.9);
    opacity: 0;
    transition: all 0.6s ease;
    transition-delay: 1.5s;
  }

  .legacy-badge.animate-in {
    transform: scale(1);
    opacity: 1;
  }

  .badge-content {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem 1.5rem;
    background: linear-gradient(135deg, rgba(255, 0, 0, 0.15), rgba(255, 0, 0, 0.05));
    border: 1px solid rgba(255, 0, 0, 0.3);
    border-radius: 30px;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 15px rgba(255, 0, 0, 0.1);
  }

  .badge-year {
    font-size: 0.95rem;
    color: #ff0000;
    font-weight: 600;
    letter-spacing: 0.5px;
  }

  .badge-separator {
    color: rgba(255, 0, 0, 0.6);
    font-weight: 300;
    font-size: 1rem;
  }

  .hero-video {
    display: flex;
    justify-content: center;
    align-items: center;
    transform: translateX(50px);
    opacity: 0;
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    transition-delay: calc(var(--delay) * 0.3s);
  }

  .hero-video.animate-in {
    transform: translateX(0);
    opacity: 1;
  }

  .video-embed {
    width: 100%;
    aspect-ratio: 16 / 9;
    border: none;
    border-radius: 15px;
    transition: all 0.3s ease;
  }

  .video-embed:hover {
    transform: scale(1.02);
    box-shadow: 0 10px 30px rgba(255, 0, 0, 0.2);
  }

  /* Stats Section */
  .stats-section {
    margin-bottom: 6rem;
    transform: translateY(30px);
    opacity: 0;
    transition: all 0.6s ease;
    transition-delay: calc(var(--delay) * 0.3s);
  }

  .stats-section.animate-in {
    transform: translateY(0);
    opacity: 1;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
  }

  .stat-item {
    text-align: center;
    padding: 2rem 1rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    backdrop-filter: blur(10px);
    transform: translateY(20px);
    opacity: 0;
    transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    transition-delay: calc(var(--delay) * 0.3s);
  }

  .stat-item.animate-in {
    transform: translateY(0);
    opacity: 1;
  }

  .stat-item:hover {
    transform: translateY(-5px);
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 0, 0, 0.3);
  }

  .stat-number {
    display: block;
    font-size: 2.5rem;
    font-weight: 700;
    color: #ff0000;
    margin-bottom: 0.5rem;
  }

  .stat-label {
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.8);
    font-weight: 400;
  }

  /* Story Section */
  .story-section {
    margin-bottom: 6rem;
    transform: translateX(-30px);
    opacity: 0;
    transition: all 0.8s ease;
    transition-delay: calc(var(--delay) * 0.3s);
  }

  .story-section.animate-in {
    transform: translateX(0);
    opacity: 1;
  }

  .story-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: start;
  }

  .story-title {
    font-size: 2.2rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    color: white;
    position: relative;
  }

  .story-title::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -10px;
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, #ff0000, transparent);
  }

  .story-paragraph {
    font-size: 1.1rem;
    line-height: 1.7;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 1.5rem;
  }

  .story-paragraph.highlight {
    color: rgba(255, 255, 255, 0.9);
    font-style: italic;
    padding: 1rem;
    background: rgba(255, 0, 0, 0.1);
    border-left: 3px solid #ff0000;
    border-radius: 5px;
  }

  /* Timeline */
  .timeline {
    position: relative;
    padding-left: 2rem;
  }

  .timeline::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(to bottom, #ff0000, rgba(255, 0, 0, 0.3));
  }

  .timeline-item {
    position: relative;
    margin-bottom: 2rem;
    transform: translateX(20px);
    opacity: 0;
    transition: all 0.6s ease;
    transition-delay: calc(var(--delay) * 0.3s + 0.2s);
  }

  .timeline-item.animate-in {
    transform: translateX(0);
    opacity: 1;
  }

  .timeline-item::before {
    content: '';
    position: absolute;
    left: -2.5rem;
    top: 0.5rem;
    width: 10px;
    height: 10px;
    background: #ff0000;
    border-radius: 50%;
    border: 2px solid #000;
  }

  .timeline-year {
    font-size: 1.2rem;
    font-weight: 700;
    color: #ff0000;
    margin-bottom: 0.5rem;
  }

  .timeline-content h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: white;
    margin-bottom: 0.3rem;
  }

  .timeline-content p {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.7);
    margin: 0;
  }

  /* Spirit Section */
  .spirit-section {
    margin-bottom: 6rem;
    text-align: center;
    transform: translateY(30px);
    opacity: 0;
    transition: all 0.8s ease;
    transition-delay: calc(var(--delay) * 0.3s);
  }

  .spirit-section.animate-in {
    transform: translateY(0);
    opacity: 1;
  }

  .spirit-title {
    font-size: 2.2rem;
    font-weight: 600;
    margin-bottom: 2rem;
    color: white;
    position: relative;
    display: inline-block;
  }

  .spirit-title::after {
    content: '';
    position: absolute;
    left: 50%;
    bottom: -10px;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, #ff0000, transparent);
  }

  .spirit-text {
    font-size: 1.2rem;
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.7;
    max-width: 800px;
    margin: 0 auto 2rem;
  }

  .spirit-quote {
    background: rgba(255, 0, 0, 0.1);
    border: 1px solid rgba(255, 0, 0, 0.3);
    border-radius: 15px;
    padding: 2rem;
    max-width: 900px;
    margin: 0 auto;
  }

  .spirit-quote p {
    font-size: 1.1rem;
    font-style: italic;
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
    margin: 0;
  }

  @media (max-width: 1024px) {
    .about-hero,
    .story-content {
      grid-template-columns: 1fr;
      gap: 3rem;
    }

    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .gallery-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 768px) {
    .about-section {
      padding: 2rem 1rem;
    }

    .hero-title {
      font-size: 1.8rem;
    }

    .hero-video {
      height: 250px;
    }

    .stats-grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .gallery-grid {
      grid-template-columns: 1fr;
    }

    .badge-content {
      padding: 0.6rem 1.2rem;
    }

    .badge-year {
      font-size: 0.85rem;
    }
  }

  @media (max-width: 480px) {
    .hero-title,
    .story-title,
    .spirit-title,
    .gallery-title {
      font-size: 1.6rem;
    }

    .hero-description,
    .story-paragraph,
    .spirit-text {
      font-size: 1rem;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof IntersectionObserver !== 'undefined') {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const element = entry.target;

            if (element.hasAttribute('data-animate-about')) {
              element.classList.add('animate-in');

              // Animate elements with staggered delays
              const animateElements = [
                { selector: '[data-animate-hero]', delay: 200 },
                { selector: '[data-animate-badge]', delay: 1000 },
                { selector: '[data-animate-video]', delay: 400 },
                { selector: '[data-animate-stats]', delay: 600 },
                { selector: '[data-animate-stat]', delay: 800 },
                { selector: '[data-animate-story]', delay: 1000 },
                { selector: '[data-animate-timeline]', delay: 1200 },
                { selector: '[data-animate-spirit]', delay: 1400 },
                { selector: '[data-animate-gallery]', delay: 1600 },
                { selector: '[data-animate-gallery-item]', delay: 1800 }
              ];

              animateElements.forEach(({ selector, delay }) => {
                setTimeout(() => {
                  const elements = element.querySelectorAll(selector);
                  elements.forEach((el, index) => {
                    setTimeout(() => {
                      el.classList.add('animate-in');
                    }, index * 100);
                  });
                }, delay);
              });

              observer.unobserve(element);
            }
          }
        });
      }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      });

      const section = document.querySelector('[data-animate-about]');
      if (section) {
        observer.observe(section);
      }
    }
  });
</script>
