---
import Title from "../ui/Title.astro";
---

<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (typeof IntersectionObserver !== "undefined") {
            const observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            const element = entry.target;

                            if (element.hasAttribute("data-animate-mission")) {
                                element.classList.add("animate-in");

                                setTimeout(() => {
                                    const title = element.querySelector(
                                        "[data-animate-title]",
                                    );
                                    if (title)
                                        title.classList.add("animate-in");
                                }, 300);

                                setTimeout(() => {
                                    const text = element.querySelector(
                                        "[data-animate-text]",
                                    );
                                    if (text) text.classList.add("animate-in");
                                }, 600);

                                observer.unobserve(element);
                            }
                        }
                    });
                },
                {
                    threshold: 0.3,
                    rootMargin: "0px 0px -50px 0px",
                },
            );

            const section = document.querySelector("[data-animate-mission]");
            if (section) {
                observer.observe(section);
            }
        }
    });

    document.addEventListener("DOMContentLoaded", function () {
        if (typeof IntersectionObserver !== "undefined") {
            const observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            const element = entry.target;

                            // Main section animation
                            if (element.hasAttribute("data-animate")) {
                                element.classList.add("animate-in");

                                // Staggered animations for child elements
                                setTimeout(() => {
                                    const cards = element.querySelector(
                                        "[data-animate-cards]",
                                    );
                                    if (cards)
                                        cards.classList.add("animate-in");
                                }, 200);

                                setTimeout(() => {
                                    const content = element.querySelector(
                                        "[data-animate-content]",
                                    );
                                    if (content)
                                        content.classList.add("animate-in");
                                }, 400);

                                setTimeout(() => {
                                    const title = element.querySelector(
                                        "[data-animate-title]",
                                    );
                                    if (title)
                                        title.classList.add("animate-in");
                                }, 600);

                                setTimeout(() => {
                                    const image = element.querySelector(
                                        "[data-animate-image]",
                                    );
                                    if (image)
                                        image.classList.add("animate-in");
                                }, 800);

                                setTimeout(() => {
                                    const description = element.querySelector(
                                        "[data-animate-description]",
                                    );
                                    if (description)
                                        description.classList.add("animate-in");
                                }, 1000);

                                setTimeout(() => {
                                    const label = element.querySelector(
                                        "[data-animate-label]",
                                    );
                                    if (label)
                                        label.classList.add("animate-in");
                                }, 1200);

                                setTimeout(() => {
                                    const button = element.querySelector(
                                        "[data-animate-button]",
                                    );
                                    if (button)
                                        button.classList.add("animate-in");
                                }, 1400);

                                // Stop observing once animated
                                observer.unobserve(element);
                            }
                        }
                    });
                },
                {
                    threshold: 0.9,
                    rootMargin: "0px 0px -50px 0px",
                },
            );

            const section = document.querySelector("[data-animate]");
            if (section) {
                observer.observe(section);
            }
        } else {
            // Fallback for browsers without IntersectionObserver
            const section = document.querySelector("[data-animate]");
            if (section) {
                section.classList.add("animate-in");
                section
                    .querySelector("[data-animate-cards]")
                    ?.classList.add("animate-in");
                section
                    .querySelector("[data-animate-content]")
                    ?.classList.add("animate-in");
                section
                    .querySelector("[data-animate-title]")
                    ?.classList.add("animate-in");
                section
                    .querySelector("[data-animate-image]")
                    ?.classList.add("animate-in");
                section
                    .querySelector("[data-animate-description]")
                    ?.classList.add("animate-in");
                section
                    .querySelector("[data-animate-label]")
                    ?.classList.add("animate-in");
                section
                    .querySelector("[data-animate-button]")
                    ?.classList.add("animate-in");
            }
        }
    });
</script>

<section class="aeolus-racing" data-animate>
    <div class="cards-container" ata-animate-cards>
        <div class="card card-back"></div>
        <div class="card card-front">
            <img
                src="Award.webp"
                alt="SAE India 2017 Formula Car"
                class="card-image"
                loading="lazy"
                decoding="async"
            />
            <div class="card-label">SAE INDIA 2017</div>
        </div>
    </div>

    <div class="content">
        <h1 class="title">
            <em class="we" data-animate-title>We</em>are Aeolus Racing, the FSAE
            club of IITH. Reformed in 2024 with the goal of designing and
            building high-performance formula-style race cars. Reviving the
            legacy of the former IITH Racing, we are a team of passionate
            engineering students spanning multiple disciplines working together
            with the common goal of building a formula style car.
        </h1>
        <button class="read-more-btn" data-animate-button>
            READ MORE
            <div class="arrow"></div>
        </button>
    </div>
</section>
<section class="mission-section" data-animate-mission>
    <div class="mission-content">
        <Title text="OUR MISSION" />
        <p class="mission-text" data-animate-text>
            Our mission is to build a thriving Formula Student culture at IIT
            Hyderabad, pushing the limits of performance and design through
            innovation, collaboration, and relentless engineering.
        </p>
    </div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (typeof IntersectionObserver !== "undefined") {
            const observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            const element = entry.target;

                            if (element.hasAttribute("data-animate-mission")) {
                                element.classList.add("animate-in");

                                setTimeout(() => {
                                    const title = element.querySelector(
                                        "[data-animate-title]",
                                    );
                                    if (title)
                                        title.classList.add("animate-in");
                                }, 300);

                                setTimeout(() => {
                                    const text = element.querySelector(
                                        "[data-animate-text]",
                                    );
                                    if (text) text.classList.add("animate-in");
                                }, 600);

                                observer.unobserve(element);
                            }
                        }
                    });
                },
                {
                    threshold: 0.3,
                    rootMargin: "0px 0px -50px 0px",
                },
            );

            const section = document.querySelector("[data-animate-mission]");
            if (section) {
                observer.observe(section);
            }
        }
    });
</script>


<style lang="scss">
  @use "../sections/_About.scss";
</style>